<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>ì•½ ë³µìš© ì•Œë¦¼ ìˆ˜ì‹ ì¤‘...</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        height: 100%;
      }

      body {
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
        background: radial-gradient(circle at top, #3f51b5, #000000);
        color: #ffffff;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .call-screen {
        text-align: center;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 24px;
        padding: 24px;
      }

      .caller-avatar {
        width: 96px;
        height: 96px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.15);
        border: 2px solid rgba(255, 255, 255, 0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 40px;
        margin-bottom: 8px;
      }

      .caller-name {
        font-size: 20px;
        font-weight: 600;
      }

      .call-subtitle {
        font-size: 14px;
        opacity: 0.9;
      }

      .alarm-info {
        font-size: 13px;
        opacity: 0.8;
      }

      .buttons {
        display: flex;
        gap: 32px;
        margin-top: 24px;
      }

      .btn {
        width: 64px;
        height: 64px;
        border-radius: 50%;
        border: none;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
        color: #fff;
        cursor: pointer;
      }

      .btn.decline {
        background: #e53935;
      }

      .btn.accept {
        background: #43a047;
      }

      .btn-label {
        font-size: 12px;
        margin-top: 8px;
        opacity: 0.9;
      }

      .btn-wrap {
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .small-link {
        font-size: 12px;
        margin-top: 24px;
        opacity: 0.7;
        text-decoration: underline;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <div class="call-screen">
      <div class="caller-avatar">ğŸ’Š</div>
      <div class="caller-name">ì•½ ë³µìš© ì•Œë¦¼</div>
      <div class="call-subtitle">â€œì €ë… ì•½ ë“œì‹¤ ì‹œê°„ì´ ë˜ì—ˆì–´ìš”.â€</div>
      <div class="alarm-info" id="alarm-info"></div>

      <div class="buttons">
        <div class="btn-wrap">
          <button class="btn decline" id="btn-decline">âœ•</button>
          <div class="btn-label">ë‚˜ì¤‘ì—</div>
        </div>
        <div class="btn-wrap">
          <button class="btn accept" id="btn-accept">âœ“</button>
          <div class="btn-label">ë³µìš© ì™„ë£Œ</div>
        </div>
      </div>

      <div class="small-link" id="back-home">í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°</div>
    </div>

    <script>
      // URLì— alarmId ê°™ì€ ê°’ì´ ìˆìœ¼ë©´ í‘œì‹œ (ì˜ˆ: incoming.html?alarmId=test123)
      const params = new URLSearchParams(location.search);
      const alarmId = params.get("alarmId");
      const alarmInfoEl = document.getElementById("alarm-info");
      if (alarmId) {
        alarmInfoEl.textContent = "ì•Œë¦¼ ID: " + alarmId;
      }

      // ì§„ë™ íŒ¨í„´ (ì•ˆë“œë¡œì´ë“œ í¬ë¡¬ ì¼ë¶€ì—ì„œ ë™ì‘)
      if (navigator.vibrate) {
        // ê°„ë‹¨í•œ íŒ¨í„´: 600ms ì§„ë™ - 300ms ëŒ€ê¸° - 600ms ì§„ë™
        navigator.vibrate([600, 300, 600]);
      }

      document
        .getElementById("btn-accept")
        .addEventListener("click", () => {
          // TODO: ì—¬ê¸°ì„œ ì‹¤ì œ ë³µìš© ì™„ë£Œ ì²˜ë¦¬ë¥¼ ì„œë²„/ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— ì—°ë™
          alert("ë³µìš© ì™„ë£Œë¡œ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤." + (alarmId ? " (ID: " + alarmId + ")" : ""));
          window.location.href = "./index.html";
        });

      document
        .getElementById("btn-decline")
        .addEventListener("click", () => {
          // TODO: â€˜ë‚˜ì¤‘ì— ì•Œë¦¼â€™ ì¬ì˜ˆì•½ ë¡œì§ì„ ì¶”í›„ì— ë¶™ì¼ ìˆ˜ ìˆìŒ
          alert("ë‚˜ì¤‘ì— ë‹¤ì‹œ ì•Œë¦¼ì„ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
          window.location.href = "./index.html";
        });

      document.getElementById("back-home").addEventListener("click", () => {
        window.location.href = "./index.html";
      });
    </script>
  </body>
</html>

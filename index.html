<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8" />
    <title>PWA ì˜¤í”„ë¼ì¸ í…ŒìŠ¤íŠ¸</title>

    <!-- ë·°í¬íŠ¸: ëª¨ë°”ì¼ ì›¹ì•± í•„ìˆ˜ -->
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- PWA ê¸°ë³¸ ì„¸íŒ… -->
    <link rel="manifest" href="manifest.webmanifest" />
    <meta name="theme-color" content="#ffffff" />

    <!-- iOSìš© ì›¹ì•± ì„¤ì • -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="PWA Test" />
</head>

<body>
    <h1>PWA ì˜¤í”„ë¼ì¸ í…ŒìŠ¤íŠ¸</h1>
    <p id="status">ë„¤íŠ¸ì›Œí¬ ìƒíƒœ ì²´í¬ ì¤‘...</p>
    <p>
        ì´ í™”ë©´ì„ ë³¸ ë’¤, í™ˆ í™”ë©´ì— ì¶”ê°€í•œ í›„<br />
        ë¹„í–‰ê¸° ëª¨ë“œ(ì˜¤í”„ë¼ì¸)ë¡œ ë°”ê¾¸ê³  ë‹¤ì‹œ ì‹¤í–‰í•´ë³´ì„¸ìš”.
    </p>

    <script>
        // ë„¤íŠ¸ì›Œí¬ ìƒíƒœ í‘œì‹œ
        function updateStatus() {
            const el = document.getElementById("status");
            if (navigator.onLine) {
                el.textContent = "âœ… ì˜¨ë¼ì¸ ìƒíƒœì…ë‹ˆë‹¤.";
            } else {
                el.textContent = "ğŸ“´ ì˜¤í”„ë¼ì¸ ìƒíƒœì…ë‹ˆë‹¤. (ê·¸ë˜ë„ ì´ í™”ë©´ì€ ëœ¨ì£ !)";
            }
        }

        window.addEventListener("online", updateStatus);
        window.addEventListener("offline", updateStatus);
        updateStatus();

        // ì„œë¹„ìŠ¤ ì›Œì»¤ ë“±ë¡
        if ("serviceWorker" in navigator) {
            window.addEventListener("load", function () {
                navigator.serviceWorker
                    .register("./service-worker.js")
                    .then(function (reg) {
                        console.log("Service Worker ë“±ë¡ ì„±ê³µ:", reg.scope);
                    })
                    .catch(function (err) {
                        console.log("Service Worker ë“±ë¡ ì‹¤íŒ¨:", err);
                    });
            });
        }
    </script>
</body>

</html>